<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ÈîÆÁõò‰∫ã‰ª∂code/key/keyCodeÂØπÁÖß‰∏ÄËßàË°®</title>

    <!-- <link rel="stylesheet" href="css/style.css" media="screen" type="text/css" /> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.21.1/dist/bootstrap-table.min.css">
    <!-- <link rel="stylesheet" href="./theme.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/keyboard.css">

</head>

<body>
    <style type="text/css">

    </style>

    <div class="container">
        <div class="row">
            <div class="col-6">
                <div class="table-container">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">ÈîÆÁõòÂΩïÂÖ•</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">keyCodeÂèçÊü•</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">ÂàÜÁ±ªË°®</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <!-- ÈîÆÁõòÂΩïÂÖ• -->
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <div id='wrapper'>
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="basic-addon1">@</span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="ÂΩïÂÖ•" aria-label="ÂΩïÂÖ•" aria-describedby="basic-addon1" id="input">
                                </div>
                                <div>
                                    <table class="table table-condensed" id="typedTable" data-toggle="table" data-height="600">
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- keyCodeÊü•ËØ¢ -->
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                            <div id='wrapper'>
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="basic-addon1">#</span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="ËØ∑ËæìÂÖ•keyCodeÊï∞ÂÄº" aria-label="ËØ∑ËæìÂÖ•keyCodeÊï∞ÂÄº" aria-describedby="basic-addon1" id="inputNumber">
                                </div>
                                <div>
                                    <table class="table table-condensed" id="searchTable" data-toggle="table" data-height="600">
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                            <div id='wrapper'>
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="basic-addon1">%</span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="ËØ∑ËæìÂÖ•keyCodeÊï∞ÂÄº" aria-label="ËØ∑ËæìÂÖ•keyCodeÊï∞ÂÄº" aria-describedby="basic-addon1" id="inputValue">
                                </div>
                                <div>
                                    <table class="table table-condensed" id="categoryTable" data-toggle="table" data-height="600">
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6">

                <div class="keyboard-container">
                    <input class="input" placeholder="Tap on the virtual keyboard to start" />
                    <div class="keyboardContainer">
                        <div class="simple-keyboard-main"></div>

                        <div class="controlArrows">
                            <div class="simple-keyboard-control"></div>
                            <div class="simple-keyboard-arrows"></div>
                        </div>

                        <div class="numPad">
                            <div class="simple-keyboard-numpad"></div>
                            <div class="simple-keyboard-numpadEnd"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- Content here -->

    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.21.1/dist/bootstrap-table.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.js"></script>
    <script src="./data.js"></script>
    <script>
        var data = keyData;
        var code;
        var key;
        var keyCode;
        var input = document.getElementById("input");
        var inputNumber = $('#inputNumber');
        var typedTable = $('#typedTable');
        var searchTable = $('#searchTable');
        var categoryTable = $('#categoryTable');
        var navLink = $('.nav-link');
        var tableConfig = {
            sidePagination: "true",
            striped: true, // ÊòØÂê¶ÊòæÁ§∫Ë°åÈó¥ÈöîËâ≤
            //search : "true",
            uniqueId: "ID",
            pageSize: "5",
            pagination: false, // ÊòØÂê¶ÂàÜÈ°µ
            sortable: true, // ÊòØÂê¶ÂêØÁî®ÊéíÂ∫è
            columns: [{
                    field: 'key',
                    title: 'key',
                    width: 80,
                    align: 'center',
                    valign: 'middle',
                }, {
                    field: 'code',
                    title: 'code',
                    width: 80,
                    align: 'center',
                    valign: 'middle',
                }, {
                    field: 'keyCode',
                    title: 'keyCode',
                    width: 40,
                    align: 'center',
                    valign: 'middle',
                },

            ]
        }

        typedTable.bootstrapTable(tableConfig);
        searchTable.bootstrapTable(tableConfig);
        categoryTable.bootstrapTable(tableConfig);

        document.addEventListener('keydown', function(e) {
            // Â±ïÁ§∫ÈîÆÁõò‰∫ã‰ª∂ÂØπË±°‰∏≠ÁöÑÂ±ûÊÄß
            console.log('üöÄ -> document.addEventListener -> e', e);
            let rowData = {
                key: e.key,
                code: e.code,
                keyCode: e.keyCode,
            }
            typedTable.bootstrapTable('insertRow', {
                index: 0,
                row: rowData
            })
        })
        navLink.on('click', function(e) {
            console.log('üöÄ -> navLink.on -> e', e);
            searchTable.bootstrapTable('resetView');

        });

        searchTable.bootstrapTable('load', data);
        categoryTable.bootstrapTable('load', data);
        inputNumber.bind('input porpertychange', function(e) {
            console.log('üöÄ -> inputNumber.bind -> e', e);
            let value = e.target.value;
            console.log('üöÄ -> inputNumber.bind -> value', value);
            console.log('üöÄ -> inputNumber.bind -> value typeof ', typeof value);
            if (value === null || value === undefined || value === '') {
                searchTable.bootstrapTable('load', data);
            } else {
                let rowDatas = data.filter((item) => {
                    return String(item.keyCode) === value;
                });
                console.log('üöÄ -> rowDatas -> rowDatas', rowDatas);
                searchTable.bootstrapTable('load', rowDatas)
            }

        });
        const Keyboard = window.SimpleKeyboard.default;
        console.log('üöÄ -> window.SimpleKeyboard', window.SimpleKeyboard);

        let commonKeyboardOptions = {
            onChange: input => onChange(input),
            onKeyPress: button => onKeyPress(button),
            theme: "simple-keyboard hg-theme-default hg-layout-default",
            physicalKeyboardHighlight: true,
            syncInstanceInputs: true,
            mergeDisplay: true,
            debug: true
        };

        // ‰∏ªÈîÆÁõòÂå∫
        let keyboard = new Keyboard(".simple-keyboard-main", {
            ...commonKeyboardOptions,
            /**
             * Layout by:
             * Sterling Butters (https://github.com/SterlingButters)
             */
            layout: {
                default: [
                    "{escape} {f1} {f2} {f3} {f4} {f5} {f6} {f7} {f8} {f9} {f10} {f11} {f12}",
                    "` 1 2 3 4 5 6 7 8 9 0 - = {backspace}",
                    "{tab} q w e r t y u i o p [ ] \\",
                    "{capslock} a s d f g h j k l ; ' {enter}",
                    "{shiftleft} z x c v b n m , . / {shiftright}",
                    "{controlleft} {altleft} {metaleft} {space} {metaright} {altright}"
                ],
                shift: [
                    "{escape} {f1} {f2} {f3} {f4} {f5} {f6} {f7} {f8} {f9} {f10} {f11} {f12}",
                    "~ ! @ # $ % ^ & * ( ) _ + {backspace}",
                    "{tab} Q W E R T Y U I O P { } |",
                    '{capslock} A S D F G H J K L : " {enter}',
                    "{shiftleft} Z X C V B N M < > ? {shiftright}",
                    "{controlleft} {altleft} {metaleft} {space} {metaright} {altright}"
                ]
            },
            display: {
                "{escape}": "esc ‚éã",
                "{tab}": "tab ‚á•",
                "{backspace}": "backspace ‚å´",
                "{enter}": "enter ‚Üµ",
                "{capslock}": "caps lock ‚á™",
                "{shiftleft}": "shift ‚áß",
                "{shiftright}": "shift ‚áß",
                "{controlleft}": "ctrl ‚åÉ",
                "{controlright}": "ctrl ‚åÉ",
                "{altleft}": "alt ‚å•",
                "{altright}": "alt ‚å•",
                "{metaleft}": "cmd ‚åò",
                "{metaright}": "cmd ‚åò"
            }
        });
        console.log('üöÄ -> keyboard', keyboard);

        // ÊéßÂà∂ÈîÆÂå∫
        let keyboardControlPad = new Keyboard(".simple-keyboard-control", {
            ...commonKeyboardOptions,
            layout: {
                default: [
                    "{prtscr} {scrolllock} {pause}",
                    "{insert} {home} {pageup}",
                    "{delete} {end} {pagedown}"
                ]
            }
        });

        // ÁÆ≠Â§¥Âå∫
        let keyboardArrows = new Keyboard(".simple-keyboard-arrows", {
            ...commonKeyboardOptions,
            layout: {
                default: ["{arrowup}", "{arrowleft} {arrowdown} {arrowright}"]
            }
        });

        // Êï∞Â≠óÈîÆÂå∫
        let keyboardNumPad = new Keyboard(".simple-keyboard-numpad", {
            ...commonKeyboardOptions,
            layout: {
                default: [
                    "{numlock} {numpaddivide} {numpadmultiply}",
                    "{numpad7} {numpad8} {numpad9}",
                    "{numpad4} {numpad5} {numpad6}",
                    "{numpad1} {numpad2} {numpad3}",
                    "{numpad0} {numpaddecimal}"
                ]
            }
        });

        // Êï∞Â≠óÈîÆÂêéÂå∫Ôºà-„ÄÅ+„ÄÅenterÔºâ
        let keyboardNumPadEnd = new Keyboard(".simple-keyboard-numpadEnd", {
            ...commonKeyboardOptions,
            layout: {
                default: ["{numpadsubtract}", "{numpadadd}", "{numpadenter}"]
            }
        });

        /**
         * Physical Keyboard support
         * Whenever the input is changed with the keyboard, updating SimpleKeyboard's internal input
         */
        /*document.addEventListener("keydown", event => {
          // Disabling keyboard input, as some keys (like F5) make the browser lose focus.
          // If you're like to re-enable it, comment the next line and uncomment the following ones
          event.preventDefault();
        });*/

        document.querySelector(".input").addEventListener("input", event => {
            let input = document.querySelector(".input").value;
            keyboard.setInput(input);
        });


        function onChange(input) {
            document.querySelector(".input").value = input;
            keyboard.setInput(input);

            console.log("Input changed", input);
        }

        function onKeyPress(button) {
            console.log("Button pressed", button);

            /**
             * If you want to handle the shift and caps lock buttons
             */
            if (
                button === "{shift}" ||
                button === "{shiftleft}" ||
                button === "{shiftright}" ||
                button === "{capslock}"
            )
                handleShift();
        }

        function handleShift() {
            let currentLayout = keyboard.options.layoutName;
            let shiftToggle = currentLayout === "default" ? "shift" : "default";

            keyboard.setOptions({
                layoutName: shiftToggle
            });
        }

        document.addEventListener("keydown", event => {});


        /**
         * Handle keyboard press
         */
        document.addEventListener("keydown", event => {
            // highlightButton(event);
        });

        document.addEventListener("keyup", event => {
            // unhighlightButton(event);
        });
    </script>
</body>

</html>